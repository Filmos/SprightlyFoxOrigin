
val quasi = {"compactmachines:wall":{"Stability":0.7,"Potential":1.0},"minecraft:iron_block":{"Stability":1.8,"Potential":1.0},"betterendforge:thallasium_block":{"Stability":1.7,"Potential":1.6},"betterendforge:terminite_block":{"Stability":2.0,"Potential":2.0,"Spread":0.2},"tconstruct:pig_iron_block":{"Stability":2.1,"Potential":1.2,"Decay":0.2},"tconstruct:slimesteel_block":{"Stability":2.3,"Potential":1.1},"minecraft:ancient_debris":{"Stability":6.0,"Potential":1.1},"byg:pendorite_block":{"Stability":12.0,"Potential":1.4},"byg:ametrine_block":{"Stability":10.0,"Potential":1.8},"minecraft:netherite_block":{"Stability":30.0,"Potential":1.8},"betterendforge:aeternium_block":{"Stability":28.0,"Potential":2.7},"byg:anthracite_block":{"Stability":0.6,"Potential":1.3},"minecraft:coal_block":{"Stability":0.5,"Potential":1.1},"byg:lignite_block":{"Stability":0.5,"Potential":1.0},"minecraft:obsidian":{"Stability":1.0,"Potential":1.2},"minecraft:lapis_block":{"Stability":0.4,"Potential":1.3},"minecraft:redstone_block":{"Stability":0.3,"Potential":1.6},"minecraft:quartz_block":{"Stability":0.6,"Potential":1.4},"minecraft:gold_block":{"Stability":1.2,"Potential":2.0},"tconstruct:rose_gold_block":{"Stability":0.2,"Potential":4.2},"materialis:fairy_block":{"Stability":1.4,"Potential":2.2},"minecraft:crying_obsidian":{"Stability":1.0,"Potential":2.8},"minecraft:emerald_block":{"Stability":1.8,"Potential":2.6},"minecraft:diamond_block":{"Stability":3.8,"Potential":2.2},"twilightforest:arctic_fur_block":{"Stability":1.5,"Potential":1.5},"twilightforest:ironwood_block":{"Stability":1.6,"Potential":1.3},"tconstruct:tinkers_bronze_block":{"Stability":1.3,"Potential":1.3},"tconstruct:copper_block":{"Stability":1.3,"Potential":1.2},"create:brass_block":{"Stability":1.5,"Potential":1.1},"create:zinc_block":{"Stability":1.6,"Potential":1.0},"twilightforest:steeleaf_block":{"Stability":2.5,"Potential":1.2},"twilightforest:carminite_block":{"Stability":0.2,"Potential":6.0,"Dimensional Stability":-1.2},"betterendforge:ender_block":{"Stability":0.2,"Potential":1.8,"Spread":0.3},"betterendforge:amber_block":{"Stability":0.3,"Potential":1.4},"tconstruct:hepatizon_block":{"Stability":3.4,"Potential":2.0},"tconstruct:cobalt_block":{"Stability":3.2,"Potential":2.4},"tconstruct:manyullyn_block":{"Stability":5.8,"Potential":2.7},"tconstruct:queens_slime_block":{"Stability":2.0,"Potential":2.5},"twilightforest:fiery_block":{"Stability":10.0,"Potential":4.2,"Heat":2.4},"twilightforest:knightmetal_block":{"Stability":4.2,"Potential":2.6},"create:shadow_steel_casing":{"Stability":2.8,"Potential":1.6,"Dimensional Stability":-0.7},"create:refined_radiance_casing":{"Stability":2.6,"Potential":1.8,"Dimensional Stability":0.7},"overloaded_cb:compressed_wall_1":{"Stability":0.9,"Potential":1.0},"overloaded_cb:compressed_wall_2":{"Stability":1.3,"Potential":1.0},"overloaded_cb:compressed_wall_3":{"Stability":1.9,"Potential":1.0},"overloaded_cb:compressed_wall_4":{"Stability":2.9,"Potential":1.0},"overloaded_cb:compressed_wall_5":{"Stability":4.7,"Potential":1.0},"overloaded_cb:compressed_wall_6":{"Stability":7.6,"Potential":1.0},"overloaded_cb:compressed_wall_7":{"Stability":12.7,"Potential":1.0},"overloaded_cb:compressed_wall_8":{"Stability":21.3,"Potential":1.0},"overloaded_cb:compressed_wall_9":{"Stability":36.0,"Potential":1.0},"overloaded_cb:compressed_iron_block_1":{"Stability":2.8,"Potential":1.0},"overloaded_cb:compressed_iron_block_2":{"Stability":4.4,"Potential":1.0},"overloaded_cb:compressed_iron_block_3":{"Stability":7.3,"Potential":1.0},"overloaded_cb:compressed_iron_block_4":{"Stability":12.1,"Potential":1.0},"overloaded_cb:compressed_iron_block_5":{"Stability":20.3,"Potential":1.0},"overloaded_cb:compressed_iron_block_6":{"Stability":34.2,"Potential":1.0},"overloaded_cb:compressed_iron_block_7":{"Stability":57.8,"Potential":1.0},"overloaded_cb:compressed_iron_block_8":{"Stability":98.1,"Potential":1.0},"overloaded_cb:compressed_iron_block_9":{"Stability":166.4,"Potential":1.0},"overloaded_cb:compressed_thallasium_block_1":{"Stability":2.6,"Potential":2.0},"overloaded_cb:compressed_thallasium_block_2":{"Stability":4.2,"Potential":2.7},"overloaded_cb:compressed_thallasium_block_3":{"Stability":6.8,"Potential":3.9},"overloaded_cb:compressed_thallasium_block_4":{"Stability":11.3,"Potential":6.0},"overloaded_cb:compressed_thallasium_block_5":{"Stability":18.9,"Potential":9.5},"overloaded_cb:compressed_thallasium_block_6":{"Stability":31.8,"Potential":15.5},"overloaded_cb:compressed_thallasium_block_7":{"Stability":53.7,"Potential":25.6},"overloaded_cb:compressed_thallasium_block_8":{"Stability":91.1,"Potential":42.9},"overloaded_cb:compressed_thallasium_block_9":{"Stability":154.6,"Potential":72.2},"overloaded_cb:compressed_terminite_block_1":{"Stability":3.1,"Potential":2.7,"Spread":0.3},"overloaded_cb:compressed_terminite_block_2":{"Stability":5.0,"Potential":3.9,"Spread":0.5},"overloaded_cb:compressed_terminite_block_3":{"Stability":8.3,"Potential":5.9,"Spread":0.7},"overloaded_cb:compressed_terminite_block_4":{"Stability":13.8,"Potential":9.4,"Spread":1.0},"overloaded_cb:compressed_terminite_block_5":{"Stability":23.1,"Potential":15.2,"Spread":1.5},"overloaded_cb:compressed_terminite_block_6":{"Stability":39.0,"Potential":25.1,"Spread":2.3},"overloaded_cb:compressed_terminite_block_7":{"Stability":66.1,"Potential":42.0,"Spread":3.4},"overloaded_cb:compressed_terminite_block_8":{"Stability":112.0,"Potential":70.8,"Spread":5.1},"overloaded_cb:compressed_terminite_block_9":{"Stability":190.1,"Potential":119.6,"Spread":7.7},"overloaded_cb:compressed_pig_iron_block_1":{"Stability":3.3,"Potential":1.3,"Decay":0.3},"overloaded_cb:compressed_pig_iron_block_2":{"Stability":5.3,"Potential":1.6,"Decay":0.5},"overloaded_cb:compressed_pig_iron_block_3":{"Stability":8.8,"Potential":2.0,"Decay":0.7},"overloaded_cb:compressed_pig_iron_block_4":{"Stability":14.6,"Potential":2.7,"Decay":1.0},"overloaded_cb:compressed_pig_iron_block_5":{"Stability":24.5,"Potential":3.8,"Decay":1.5},"overloaded_cb:compressed_pig_iron_block_6":{"Stability":41.4,"Potential":5.8,"Decay":2.3},"overloaded_cb:compressed_pig_iron_block_7":{"Stability":70.2,"Potential":9.2,"Decay":3.4},"overloaded_cb:compressed_pig_iron_block_8":{"Stability":119.0,"Potential":15.0,"Decay":5.1},"overloaded_cb:compressed_pig_iron_block_9":{"Stability":202.0,"Potential":24.7,"Decay":7.7},"overloaded_cb:compressed_slimesteel_block_1":{"Stability":3.6,"Potential":1.2},"overloaded_cb:compressed_slimesteel_block_2":{"Stability":5.9,"Potential":1.3},"overloaded_cb:compressed_slimesteel_block_3":{"Stability":9.7,"Potential":1.5},"overloaded_cb:compressed_slimesteel_block_4":{"Stability":16.3,"Potential":1.8},"overloaded_cb:compressed_slimesteel_block_5":{"Stability":27.4,"Potential":2.4},"overloaded_cb:compressed_slimesteel_block_6":{"Stability":46.3,"Potential":3.4},"overloaded_cb:compressed_slimesteel_block_7":{"Stability":78.4,"Potential":5.1},"overloaded_cb:compressed_slimesteel_block_8":{"Stability":132.9,"Potential":8.0},"overloaded_cb:compressed_slimesteel_block_9":{"Stability":225.7,"Potential":12.9},"overloaded_cb:compressed_ancient_debris_1":{"Stability":9.9,"Potential":1.2},"overloaded_cb:compressed_ancient_debris_2":{"Stability":16.6,"Potential":1.3},"overloaded_cb:compressed_ancient_debris_3":{"Stability":27.9,"Potential":1.5},"overloaded_cb:compressed_ancient_debris_4":{"Stability":47.2,"Potential":1.8},"overloaded_cb:compressed_ancient_debris_5":{"Stability":79.9,"Potential":2.4},"overloaded_cb:compressed_ancient_debris_6":{"Stability":135.6,"Potential":3.4},"overloaded_cb:compressed_ancient_debris_7":{"Stability":230.2,"Potential":5.1},"overloaded_cb:compressed_ancient_debris_8":{"Stability":391.0,"Potential":8.0},"overloaded_cb:compressed_ancient_debris_9":{"Stability":664.5,"Potential":12.9},"overloaded_cb:compressed_pendorite_block_1":{"Stability":20.1,"Potential":1.7},"overloaded_cb:compressed_pendorite_block_2":{"Stability":33.9,"Potential":2.2},"overloaded_cb:compressed_pendorite_block_3":{"Stability":57.4,"Potential":3.0},"overloaded_cb:compressed_pendorite_block_4":{"Stability":97.3,"Potential":4.3},"overloaded_cb:compressed_pendorite_block_5":{"Stability":165.1,"Potential":6.7},"overloaded_cb:compressed_pendorite_block_6":{"Stability":280.4,"Potential":10.7},"overloaded_cb:compressed_pendorite_block_7":{"Stability":476.4,"Potential":17.4},"overloaded_cb:compressed_pendorite_block_8":{"Stability":809.6,"Potential":28.9},"overloaded_cb:compressed_pendorite_block_9":{"Stability":1376.0,"Potential":48.4},"overloaded_cb:compressed_ametrine_block_1":{"Stability":16.7,"Potential":2.4},"overloaded_cb:compressed_ametrine_block_2":{"Stability":28.1,"Potential":3.3},"overloaded_cb:compressed_ametrine_block_3":{"Stability":47.6,"Potential":4.9},"overloaded_cb:compressed_ametrine_block_4":{"Stability":80.6,"Potential":7.7},"overloaded_cb:compressed_ametrine_block_5":{"Stability":136.7,"Potential":12.4},"overloaded_cb:compressed_ametrine_block_6":{"Stability":232.1,"Potential":20.3},"overloaded_cb:compressed_ametrine_block_7":{"Stability":394.3,"Potential":33.8},"overloaded_cb:compressed_ametrine_block_8":{"Stability":670.1,"Potential":56.8},"overloaded_cb:compressed_ametrine_block_9":{"Stability":1138.8,"Potential":95.9},"overloaded_cb:compressed_netherite_block_1":{"Stability":50.7,"Potential":2.4},"overloaded_cb:compressed_netherite_block_2":{"Stability":85.9,"Potential":3.3},"overloaded_cb:compressed_netherite_block_3":{"Stability":145.8,"Potential":4.9},"overloaded_cb:compressed_netherite_block_4":{"Stability":247.6,"Potential":7.7},"overloaded_cb:compressed_netherite_block_5":{"Stability":420.7,"Potential":12.4},"overloaded_cb:compressed_netherite_block_6":{"Stability":714.9,"Potential":20.3},"overloaded_cb:compressed_netherite_block_7":{"Stability":1215.0,"Potential":33.8},"overloaded_cb:compressed_netherite_block_8":{"Stability":2065.2,"Potential":56.8},"overloaded_cb:compressed_netherite_block_9":{"Stability":3510.6,"Potential":95.9},"overloaded_cb:compressed_aeternium_block_1":{"Stability":47.3,"Potential":3.9},"overloaded_cb:compressed_aeternium_block_2":{"Stability":80.2,"Potential":5.9},"overloaded_cb:compressed_aeternium_block_3":{"Stability":136.0,"Potential":9.4},"overloaded_cb:compressed_aeternium_block_4":{"Stability":230.9,"Potential":15.2},"overloaded_cb:compressed_aeternium_block_5":{"Stability":392.3,"Potential":25.1},"overloaded_cb:compressed_aeternium_block_6":{"Stability":666.6,"Potential":42.0},"overloaded_cb:compressed_aeternium_block_7":{"Stability":1132.9,"Potential":70.8},"overloaded_cb:compressed_aeternium_block_8":{"Stability":1925.7,"Potential":119.6},"overloaded_cb:compressed_aeternium_block_9":{"Stability":3273.4,"Potential":202.6},"overloaded_cb:compressed_anthracite_block_1":{"Stability":0.7,"Potential":1.5},"overloaded_cb:compressed_anthracite_block_2":{"Stability":1.0,"Potential":1.9},"overloaded_cb:compressed_anthracite_block_3":{"Stability":1.4,"Potential":2.5},"overloaded_cb:compressed_anthracite_block_4":{"Stability":2.1,"Potential":3.5},"overloaded_cb:compressed_anthracite_block_5":{"Stability":3.2,"Potential":5.3},"overloaded_cb:compressed_anthracite_block_6":{"Stability":5.2,"Potential":8.2},"overloaded_cb:compressed_anthracite_block_7":{"Stability":8.6,"Potential":13.3},"overloaded_cb:compressed_anthracite_block_8":{"Stability":14.4,"Potential":21.9},"overloaded_cb:compressed_anthracite_block_9":{"Stability":24.1,"Potential":36.6},"overloaded_cb:compressed_coal_block_1":{"Stability":0.6,"Potential":1.2},"overloaded_cb:compressed_coal_block_2":{"Stability":0.7,"Potential":1.3},"overloaded_cb:compressed_coal_block_3":{"Stability":0.9,"Potential":1.5},"overloaded_cb:compressed_coal_block_4":{"Stability":1.2,"Potential":1.8},"overloaded_cb:compressed_coal_block_5":{"Stability":1.8,"Potential":2.4},"overloaded_cb:compressed_coal_block_6":{"Stability":2.8,"Potential":3.4},"overloaded_cb:compressed_coal_block_7":{"Stability":4.5,"Potential":5.1},"overloaded_cb:compressed_coal_block_8":{"Stability":7.4,"Potential":8.0},"overloaded_cb:compressed_coal_block_9":{"Stability":12.3,"Potential":12.9},"overloaded_cb:compressed_lignite_block_1":{"Stability":0.6,"Potential":1.0},"overloaded_cb:compressed_lignite_block_2":{"Stability":0.7,"Potential":1.0},"overloaded_cb:compressed_lignite_block_3":{"Stability":0.9,"Potential":1.0},"overloaded_cb:compressed_lignite_block_4":{"Stability":1.2,"Potential":1.0},"overloaded_cb:compressed_lignite_block_5":{"Stability":1.8,"Potential":1.0},"overloaded_cb:compressed_lignite_block_6":{"Stability":2.8,"Potential":1.0},"overloaded_cb:compressed_lignite_block_7":{"Stability":4.5,"Potential":1.0},"overloaded_cb:compressed_lignite_block_8":{"Stability":7.4,"Potential":1.0},"overloaded_cb:compressed_lignite_block_9":{"Stability":12.3,"Potential":1.0},"overloaded_cb:compressed_obsidian_1":{"Stability":1.4,"Potential":1.3},"overloaded_cb:compressed_obsidian_2":{"Stability":2.1,"Potential":1.6},"overloaded_cb:compressed_obsidian_3":{"Stability":3.3,"Potential":2.0},"overloaded_cb:compressed_obsidian_4":{"Stability":5.4,"Potential":2.7},"overloaded_cb:compressed_obsidian_5":{"Stability":8.9,"Potential":3.8},"overloaded_cb:compressed_obsidian_6":{"Stability":14.9,"Potential":5.8},"overloaded_cb:compressed_obsidian_7":{"Stability":25.0,"Potential":9.2},"overloaded_cb:compressed_obsidian_8":{"Stability":42.3,"Potential":15.0},"overloaded_cb:compressed_obsidian_9":{"Stability":71.6,"Potential":24.7},"overloaded_cb:compressed_lapis_block_1":{"Stability":0.4,"Potential":1.5},"overloaded_cb:compressed_lapis_block_2":{"Stability":0.4,"Potential":1.9},"overloaded_cb:compressed_lapis_block_3":{"Stability":0.4,"Potential":2.5},"overloaded_cb:compressed_lapis_block_4":{"Stability":0.4,"Potential":3.5},"overloaded_cb:compressed_lapis_block_5":{"Stability":0.4,"Potential":5.3},"overloaded_cb:compressed_lapis_block_6":{"Stability":0.4,"Potential":8.2},"overloaded_cb:compressed_lapis_block_7":{"Stability":0.4,"Potential":13.3},"overloaded_cb:compressed_lapis_block_8":{"Stability":0.4,"Potential":21.9},"overloaded_cb:compressed_lapis_block_9":{"Stability":0.4,"Potential":36.6},"overloaded_cb:compressed_redstone_block_1":{"Stability":0.3,"Potential":2.0},"overloaded_cb:compressed_redstone_block_2":{"Stability":0.3,"Potential":2.7},"overloaded_cb:compressed_redstone_block_3":{"Stability":0.3,"Potential":3.9},"overloaded_cb:compressed_redstone_block_4":{"Stability":0.4,"Potential":6.0},"overloaded_cb:compressed_redstone_block_5":{"Stability":0.4,"Potential":9.5},"overloaded_cb:compressed_redstone_block_6":{"Stability":0.4,"Potential":15.5},"overloaded_cb:compressed_redstone_block_7":{"Stability":0.4,"Potential":25.6},"overloaded_cb:compressed_redstone_block_8":{"Stability":0.4,"Potential":42.9},"overloaded_cb:compressed_redstone_block_9":{"Stability":0.4,"Potential":72.2},"overloaded_cb:compressed_quartz_block_1":{"Stability":0.7,"Potential":1.7},"overloaded_cb:compressed_quartz_block_2":{"Stability":1.0,"Potential":2.2},"overloaded_cb:compressed_quartz_block_3":{"Stability":1.4,"Potential":3.0},"overloaded_cb:compressed_quartz_block_4":{"Stability":2.1,"Potential":4.3},"overloaded_cb:compressed_quartz_block_5":{"Stability":3.2,"Potential":6.7},"overloaded_cb:compressed_quartz_block_6":{"Stability":5.2,"Potential":10.7},"overloaded_cb:compressed_quartz_block_7":{"Stability":8.6,"Potential":17.4},"overloaded_cb:compressed_quartz_block_8":{"Stability":14.4,"Potential":28.9},"overloaded_cb:compressed_quartz_block_9":{"Stability":24.1,"Potential":48.4},"overloaded_cb:compressed_gold_block_1":{"Stability":1.8,"Potential":2.7},"overloaded_cb:compressed_gold_block_2":{"Stability":2.7,"Potential":3.9},"overloaded_cb:compressed_gold_block_3":{"Stability":4.3,"Potential":5.9},"overloaded_cb:compressed_gold_block_4":{"Stability":7.1,"Potential":9.4},"overloaded_cb:compressed_gold_block_5":{"Stability":11.8,"Potential":15.2},"overloaded_cb:compressed_gold_block_6":{"Stability":19.7,"Potential":25.1},"overloaded_cb:compressed_gold_block_7":{"Stability":33.2,"Potential":42.0},"overloaded_cb:compressed_gold_block_8":{"Stability":56.2,"Potential":70.8},"overloaded_cb:compressed_gold_block_9":{"Stability":95.3,"Potential":119.6},"overloaded_cb:compressed_rose_gold_block_1":{"Stability":0.2,"Potential":6.4},"overloaded_cb:compressed_rose_gold_block_2":{"Stability":0.3,"Potential":10.2},"overloaded_cb:compressed_rose_gold_block_3":{"Stability":0.3,"Potential":16.7},"overloaded_cb:compressed_rose_gold_block_4":{"Stability":0.3,"Potential":27.7},"overloaded_cb:compressed_rose_gold_block_5":{"Stability":0.3,"Potential":46.4},"overloaded_cb:compressed_rose_gold_block_6":{"Stability":0.3,"Potential":78.2},"overloaded_cb:compressed_rose_gold_block_7":{"Stability":0.4,"Potential":132.3},"overloaded_cb:compressed_rose_gold_block_8":{"Stability":0.4,"Potential":224.2},"overloaded_cb:compressed_rose_gold_block_9":{"Stability":0.4,"Potential":380.5},"overloaded_cb:compressed_fairy_block_1":{"Stability":2.1,"Potential":3.0},"overloaded_cb:compressed_fairy_block_2":{"Stability":3.3,"Potential":4.5},"overloaded_cb:compressed_fairy_block_3":{"Stability":5.3,"Potential":6.9},"overloaded_cb:compressed_fairy_block_4":{"Stability":8.8,"Potential":11.0},"overloaded_cb:compressed_fairy_block_5":{"Stability":14.6,"Potential":18.0},"overloaded_cb:compressed_fairy_block_6":{"Stability":24.5,"Potential":30.0},"overloaded_cb:compressed_fairy_block_7":{"Stability":41.4,"Potential":50.2},"overloaded_cb:compressed_fairy_block_8":{"Stability":70.2,"Potential":84.7},"overloaded_cb:compressed_fairy_block_9":{"Stability":119.0,"Potential":143.3},"overloaded_cb:compressed_crying_obsidian_1":{"Stability":1.4,"Potential":4.1},"overloaded_cb:compressed_crying_obsidian_2":{"Stability":2.1,"Potential":6.2},"overloaded_cb:compressed_crying_obsidian_3":{"Stability":3.3,"Potential":9.8},"overloaded_cb:compressed_crying_obsidian_4":{"Stability":5.4,"Potential":16.0},"overloaded_cb:compressed_crying_obsidian_5":{"Stability":8.9,"Potential":26.6},"overloaded_cb:compressed_crying_obsidian_6":{"Stability":14.9,"Potential":44.4},"overloaded_cb:compressed_crying_obsidian_7":{"Stability":25.0,"Potential":74.9},"overloaded_cb:compressed_crying_obsidian_8":{"Stability":42.3,"Potential":126.6},"overloaded_cb:compressed_crying_obsidian_9":{"Stability":71.6,"Potential":214.5},"overloaded_cb:compressed_emerald_block_1":{"Stability":2.8,"Potential":3.7},"overloaded_cb:compressed_emerald_block_2":{"Stability":4.4,"Potential":5.6},"overloaded_cb:compressed_emerald_block_3":{"Stability":7.3,"Potential":8.9},"overloaded_cb:compressed_emerald_block_4":{"Stability":12.1,"Potential":14.4},"overloaded_cb:compressed_emerald_block_5":{"Stability":20.3,"Potential":23.7},"overloaded_cb:compressed_emerald_block_6":{"Stability":34.2,"Potential":39.6},"overloaded_cb:compressed_emerald_block_7":{"Stability":57.8,"Potential":66.7},"overloaded_cb:compressed_emerald_block_8":{"Stability":98.1,"Potential":112.6},"overloaded_cb:compressed_emerald_block_9":{"Stability":166.4,"Potential":190.7},"overloaded_cb:compressed_diamond_block_1":{"Stability":6.2,"Potential":3.0},"overloaded_cb:compressed_diamond_block_2":{"Stability":10.2,"Potential":4.5},"overloaded_cb:compressed_diamond_block_3":{"Stability":17.1,"Potential":6.9},"overloaded_cb:compressed_diamond_block_4":{"Stability":28.8,"Potential":11.0},"overloaded_cb:compressed_diamond_block_5":{"Stability":48.7,"Potential":18.0},"overloaded_cb:compressed_diamond_block_6":{"Stability":82.5,"Potential":30.0},"overloaded_cb:compressed_diamond_block_7":{"Stability":139.9,"Potential":50.2},"overloaded_cb:compressed_diamond_block_8":{"Stability":237.6,"Potential":84.7},"overloaded_cb:compressed_diamond_block_9":{"Stability":403.6,"Potential":143.3},"overloaded_cb:compressed_arctic_fur_block_1":{"Stability":2.3,"Potential":1.9},"overloaded_cb:compressed_arctic_fur_block_2":{"Stability":3.6,"Potential":2.4},"overloaded_cb:compressed_arctic_fur_block_3":{"Stability":5.8,"Potential":3.5},"overloaded_cb:compressed_arctic_fur_block_4":{"Stability":9.6,"Potential":5.2},"overloaded_cb:compressed_arctic_fur_block_5":{"Stability":16.0,"Potential":8.1},"overloaded_cb:compressed_arctic_fur_block_6":{"Stability":27.0,"Potential":13.1},"overloaded_cb:compressed_arctic_fur_block_7":{"Stability":45.5,"Potential":21.5},"overloaded_cb:compressed_arctic_fur_block_8":{"Stability":77.1,"Potential":35.9},"overloaded_cb:compressed_arctic_fur_block_9":{"Stability":130.8,"Potential":60.3},"overloaded_cb:compressed_ironwood_block_1":{"Stability":2.4,"Potential":1.5},"overloaded_cb:compressed_ironwood_block_2":{"Stability":3.9,"Potential":1.9},"overloaded_cb:compressed_ironwood_block_3":{"Stability":6.3,"Potential":2.5},"overloaded_cb:compressed_ironwood_block_4":{"Stability":10.4,"Potential":3.5},"overloaded_cb:compressed_ironwood_block_5":{"Stability":17.4,"Potential":5.3},"overloaded_cb:compressed_ironwood_block_6":{"Stability":29.4,"Potential":8.2},"overloaded_cb:compressed_ironwood_block_7":{"Stability":49.6,"Potential":13.3},"overloaded_cb:compressed_ironwood_block_8":{"Stability":84.1,"Potential":21.9},"overloaded_cb:compressed_ironwood_block_9":{"Stability":142.7,"Potential":36.6},"overloaded_cb:compressed_tinkers_bronze_block_1":{"Stability":1.9,"Potential":1.5},"overloaded_cb:compressed_tinkers_bronze_block_2":{"Stability":3.0,"Potential":1.9},"overloaded_cb:compressed_tinkers_bronze_block_3":{"Stability":4.8,"Potential":2.5},"overloaded_cb:compressed_tinkers_bronze_block_4":{"Stability":7.9,"Potential":3.5},"overloaded_cb:compressed_tinkers_bronze_block_5":{"Stability":13.2,"Potential":5.3},"overloaded_cb:compressed_tinkers_bronze_block_6":{"Stability":22.1,"Potential":8.2},"overloaded_cb:compressed_tinkers_bronze_block_7":{"Stability":37.3,"Potential":13.3},"overloaded_cb:compressed_tinkers_bronze_block_8":{"Stability":63.2,"Potential":21.9},"overloaded_cb:compressed_tinkers_bronze_block_9":{"Stability":107.1,"Potential":36.6},"overloaded_cb:compressed_copper_block_1":{"Stability":1.9,"Potential":1.3},"overloaded_cb:compressed_copper_block_2":{"Stability":3.0,"Potential":1.6},"overloaded_cb:compressed_copper_block_3":{"Stability":4.8,"Potential":2.0},"overloaded_cb:compressed_copper_block_4":{"Stability":7.9,"Potential":2.7},"overloaded_cb:compressed_copper_block_5":{"Stability":13.2,"Potential":3.8},"overloaded_cb:compressed_copper_block_6":{"Stability":22.1,"Potential":5.8},"overloaded_cb:compressed_copper_block_7":{"Stability":37.3,"Potential":9.2},"overloaded_cb:compressed_copper_block_8":{"Stability":63.2,"Potential":15.0},"overloaded_cb:compressed_copper_block_9":{"Stability":107.1,"Potential":24.7},"overloaded_cb:compressed_brass_block_1":{"Stability":2.3,"Potential":1.2},"overloaded_cb:compressed_brass_block_2":{"Stability":3.6,"Potential":1.3},"overloaded_cb:compressed_brass_block_3":{"Stability":5.8,"Potential":1.5},"overloaded_cb:compressed_brass_block_4":{"Stability":9.6,"Potential":1.8},"overloaded_cb:compressed_brass_block_5":{"Stability":16.0,"Potential":2.4},"overloaded_cb:compressed_brass_block_6":{"Stability":27.0,"Potential":3.4},"overloaded_cb:compressed_brass_block_7":{"Stability":45.5,"Potential":5.1},"overloaded_cb:compressed_brass_block_8":{"Stability":77.1,"Potential":8.0},"overloaded_cb:compressed_brass_block_9":{"Stability":130.8,"Potential":12.9},"overloaded_cb:compressed_zinc_block_1":{"Stability":2.4,"Potential":1.0},"overloaded_cb:compressed_zinc_block_2":{"Stability":3.9,"Potential":1.0},"overloaded_cb:compressed_zinc_block_3":{"Stability":6.3,"Potential":1.0},"overloaded_cb:compressed_zinc_block_4":{"Stability":10.4,"Potential":1.0},"overloaded_cb:compressed_zinc_block_5":{"Stability":17.4,"Potential":1.0},"overloaded_cb:compressed_zinc_block_6":{"Stability":29.4,"Potential":1.0},"overloaded_cb:compressed_zinc_block_7":{"Stability":49.6,"Potential":1.0},"overloaded_cb:compressed_zinc_block_8":{"Stability":84.1,"Potential":1.0},"overloaded_cb:compressed_zinc_block_9":{"Stability":142.7,"Potential":1.0},"overloaded_cb:compressed_steeleaf_block_1":{"Stability":4.0,"Potential":1.3},"overloaded_cb:compressed_steeleaf_block_2":{"Stability":6.5,"Potential":1.6},"overloaded_cb:compressed_steeleaf_block_3":{"Stability":10.7,"Potential":2.0},"overloaded_cb:compressed_steeleaf_block_4":{"Stability":17.9,"Potential":2.7},"overloaded_cb:compressed_steeleaf_block_5":{"Stability":30.2,"Potential":3.8},"overloaded_cb:compressed_steeleaf_block_6":{"Stability":51.1,"Potential":5.8},"overloaded_cb:compressed_steeleaf_block_7":{"Stability":86.6,"Potential":9.2},"overloaded_cb:compressed_steeleaf_block_8":{"Stability":146.9,"Potential":15.0},"overloaded_cb:compressed_steeleaf_block_9":{"Stability":249.4,"Potential":24.7},"overloaded_cb:compressed_carminite_block_1":{"Stability":0.2,"Potential":9.5,"Dimensional Stability":-1.8},"overloaded_cb:compressed_carminite_block_2":{"Stability":0.3,"Potential":15.5,"Dimensional Stability":-2.7},"overloaded_cb:compressed_carminite_block_3":{"Stability":0.3,"Potential":25.6,"Dimensional Stability":-4},"overloaded_cb:compressed_carminite_block_4":{"Stability":0.3,"Potential":42.8,"Dimensional Stability":-6.1},"overloaded_cb:compressed_carminite_block_5":{"Stability":0.3,"Potential":72.0,"Dimensional Stability":-9.1},"overloaded_cb:compressed_carminite_block_6":{"Stability":0.3,"Potential":121.7,"Dimensional Stability":-13.7},"overloaded_cb:compressed_carminite_block_7":{"Stability":0.4,"Potential":206.2,"Dimensional Stability":-20.5},"overloaded_cb:compressed_carminite_block_8":{"Stability":0.4,"Potential":349.8,"Dimensional Stability":-30.8},"overloaded_cb:compressed_carminite_block_9":{"Stability":0.4,"Potential":593.9,"Dimensional Stability":-46.1},"overloaded_cb:compressed_ender_block_1":{"Stability":0.2,"Potential":2.4,"Spread":0.5},"overloaded_cb:compressed_ender_block_2":{"Stability":0.3,"Potential":3.3,"Spread":0.7},"overloaded_cb:compressed_ender_block_3":{"Stability":0.3,"Potential":4.9,"Spread":1.0},"overloaded_cb:compressed_ender_block_4":{"Stability":0.3,"Potential":7.7,"Spread":1.5},"overloaded_cb:compressed_ender_block_5":{"Stability":0.3,"Potential":12.4,"Spread":2.3},"overloaded_cb:compressed_ender_block_6":{"Stability":0.3,"Potential":20.3,"Spread":3.4},"overloaded_cb:compressed_ender_block_7":{"Stability":0.4,"Potential":33.8,"Spread":5.1},"overloaded_cb:compressed_ender_block_8":{"Stability":0.4,"Potential":56.8,"Spread":7.7},"overloaded_cb:compressed_ender_block_9":{"Stability":0.4,"Potential":95.9,"Spread":11.5},"overloaded_cb:compressed_amber_block_1":{"Stability":0.3,"Potential":1.7},"overloaded_cb:compressed_amber_block_2":{"Stability":0.3,"Potential":2.2},"overloaded_cb:compressed_amber_block_3":{"Stability":0.3,"Potential":3.0},"overloaded_cb:compressed_amber_block_4":{"Stability":0.4,"Potential":4.3},"overloaded_cb:compressed_amber_block_5":{"Stability":0.4,"Potential":6.7},"overloaded_cb:compressed_amber_block_6":{"Stability":0.4,"Potential":10.7},"overloaded_cb:compressed_amber_block_7":{"Stability":0.4,"Potential":17.4},"overloaded_cb:compressed_amber_block_8":{"Stability":0.4,"Potential":28.9},"overloaded_cb:compressed_amber_block_9":{"Stability":0.4,"Potential":48.4},"overloaded_cb:compressed_hepatizon_block_1":{"Stability":5.5,"Potential":2.7},"overloaded_cb:compressed_hepatizon_block_2":{"Stability":9.1,"Potential":3.9},"overloaded_cb:compressed_hepatizon_block_3":{"Stability":15.1,"Potential":5.9},"overloaded_cb:compressed_hepatizon_block_4":{"Stability":25.5,"Potential":9.4},"overloaded_cb:compressed_hepatizon_block_5":{"Stability":43.0,"Potential":15.2},"overloaded_cb:compressed_hepatizon_block_6":{"Stability":72.8,"Potential":25.1},"overloaded_cb:compressed_hepatizon_block_7":{"Stability":123.5,"Potential":42.0},"overloaded_cb:compressed_hepatizon_block_8":{"Stability":209.7,"Potential":70.8},"overloaded_cb:compressed_hepatizon_block_9":{"Stability":356.2,"Potential":119.6},"overloaded_cb:compressed_cobalt_block_1":{"Stability":5.2,"Potential":3.4},"overloaded_cb:compressed_cobalt_block_2":{"Stability":8.5,"Potential":5.0},"overloaded_cb:compressed_cobalt_block_3":{"Stability":14.2,"Potential":7.9},"overloaded_cb:compressed_cobalt_block_4":{"Stability":23.8,"Potential":12.7},"overloaded_cb:compressed_cobalt_block_5":{"Stability":40.2,"Potential":20.9},"overloaded_cb:compressed_cobalt_block_6":{"Stability":68.0,"Potential":34.8},"overloaded_cb:compressed_cobalt_block_7":{"Stability":115.3,"Potential":58.4},"overloaded_cb:compressed_cobalt_block_8":{"Stability":195.7,"Potential":98.7},"overloaded_cb:compressed_cobalt_block_9":{"Stability":332.4,"Potential":167.0},"overloaded_cb:compressed_manyullyn_block_1":{"Stability":9.6,"Potential":3.9},"overloaded_cb:compressed_manyullyn_block_2":{"Stability":16.0,"Potential":5.9},"overloaded_cb:compressed_manyullyn_block_3":{"Stability":26.9,"Potential":9.4},"overloaded_cb:compressed_manyullyn_block_4":{"Stability":45.5,"Potential":15.2},"overloaded_cb:compressed_manyullyn_block_5":{"Stability":77.1,"Potential":25.1},"overloaded_cb:compressed_manyullyn_block_6":{"Stability":130.7,"Potential":42.0},"overloaded_cb:compressed_manyullyn_block_7":{"Stability":222.0,"Potential":70.8},"overloaded_cb:compressed_manyullyn_block_8":{"Stability":377.1,"Potential":119.6},"overloaded_cb:compressed_manyullyn_block_9":{"Stability":640.8,"Potential":202.6},"overloaded_cb:compressed_queens_slime_block_1":{"Stability":3.1,"Potential":3.6},"overloaded_cb:compressed_queens_slime_block_2":{"Stability":5.0,"Potential":5.3},"overloaded_cb:compressed_queens_slime_block_3":{"Stability":8.3,"Potential":8.4},"overloaded_cb:compressed_queens_slime_block_4":{"Stability":13.8,"Potential":13.5},"overloaded_cb:compressed_queens_slime_block_5":{"Stability":23.1,"Potential":22.3},"overloaded_cb:compressed_queens_slime_block_6":{"Stability":39.0,"Potential":37.2},"overloaded_cb:compressed_queens_slime_block_7":{"Stability":66.1,"Potential":62.6},"overloaded_cb:compressed_queens_slime_block_8":{"Stability":112.0,"Potential":105.6},"overloaded_cb:compressed_queens_slime_block_9":{"Stability":190.1,"Potential":178.9},"overloaded_cb:compressed_fiery_block_1":{"Stability":16.7,"Potential":6.4,"Heat":3.6},"overloaded_cb:compressed_fiery_block_2":{"Stability":28.1,"Potential":10.2,"Heat":5.4},"overloaded_cb:compressed_fiery_block_3":{"Stability":47.6,"Potential":16.7,"Heat":8.1},"overloaded_cb:compressed_fiery_block_4":{"Stability":80.6,"Potential":27.7,"Heat":12.2},"overloaded_cb:compressed_fiery_block_5":{"Stability":136.7,"Potential":46.4,"Heat":18.2},"overloaded_cb:compressed_fiery_block_6":{"Stability":232.1,"Potential":78.2,"Heat":27.3},"overloaded_cb:compressed_fiery_block_7":{"Stability":394.3,"Potential":132.3,"Heat":41.0},"overloaded_cb:compressed_fiery_block_8":{"Stability":670.1,"Potential":224.2,"Heat":61.5},"overloaded_cb:compressed_fiery_block_9":{"Stability":1138.8,"Potential":380.5,"Heat":92.3},"overloaded_cb:compressed_knightmetal_block_1":{"Stability":6.9,"Potential":3.7},"overloaded_cb:compressed_knightmetal_block_2":{"Stability":11.4,"Potential":5.6},"overloaded_cb:compressed_knightmetal_block_3":{"Stability":19.1,"Potential":8.9},"overloaded_cb:compressed_knightmetal_block_4":{"Stability":32.1,"Potential":14.4},"overloaded_cb:compressed_knightmetal_block_5":{"Stability":54.4,"Potential":23.7},"overloaded_cb:compressed_knightmetal_block_6":{"Stability":92.1,"Potential":39.6},"overloaded_cb:compressed_knightmetal_block_7":{"Stability":156.3,"Potential":66.7},"overloaded_cb:compressed_knightmetal_block_8":{"Stability":265.5,"Potential":112.6},"overloaded_cb:compressed_knightmetal_block_9":{"Stability":451.0,"Potential":190.7},"overloaded_cb:compressed_shadow_steel_casing_1":{"Stability":4.5,"Potential":2.0,"Dimensional Stability":-1},"overloaded_cb:compressed_shadow_steel_casing_2":{"Stability":7.3,"Potential":2.7,"Dimensional Stability":-1.6},"overloaded_cb:compressed_shadow_steel_casing_3":{"Stability":12.2,"Potential":3.9,"Dimensional Stability":-2.4},"overloaded_cb:compressed_shadow_steel_casing_4":{"Stability":20.4,"Potential":6.0,"Dimensional Stability":-3.5},"overloaded_cb:compressed_shadow_steel_casing_5":{"Stability":34.5,"Potential":9.5,"Dimensional Stability":-5.3},"overloaded_cb:compressed_shadow_steel_casing_6":{"Stability":58.3,"Potential":15.5,"Dimensional Stability":-8},"overloaded_cb:compressed_shadow_steel_casing_7":{"Stability":98.9,"Potential":25.6,"Dimensional Stability":-12},"overloaded_cb:compressed_shadow_steel_casing_8":{"Stability":167.8,"Potential":42.9,"Dimensional Stability":-17.9},"overloaded_cb:compressed_shadow_steel_casing_9":{"Stability":285.0,"Potential":72.2,"Dimensional Stability":-26.9},"overloaded_cb:compressed_refined_radiance_casing_1":{"Stability":4.1,"Potential":2.4,"Dimensional Stability":1.0},"overloaded_cb:compressed_refined_radiance_casing_2":{"Stability":6.8,"Potential":3.3,"Dimensional Stability":1.6},"overloaded_cb:compressed_refined_radiance_casing_3":{"Stability":11.2,"Potential":4.9,"Dimensional Stability":2.4},"overloaded_cb:compressed_refined_radiance_casing_4":{"Stability":18.8,"Potential":7.7,"Dimensional Stability":3.5},"overloaded_cb:compressed_refined_radiance_casing_5":{"Stability":31.6,"Potential":12.4,"Dimensional Stability":5.3},"overloaded_cb:compressed_refined_radiance_casing_6":{"Stability":53.5,"Potential":20.3,"Dimensional Stability":8.0},"overloaded_cb:compressed_refined_radiance_casing_7":{"Stability":90.7,"Potential":33.8,"Dimensional Stability":12.0},"overloaded_cb:compressed_refined_radiance_casing_8":{"Stability":153.9,"Potential":56.8,"Dimensional Stability":17.9},"overloaded_cb:compressed_refined_radiance_casing_9":{"Stability":261.3,"Potential":95.9,"Dimensional Stability":26.9}};
import crafttweaker.api.item.IItemStack;
import crafttweaker.api.data.MapData;
import crafttweaker.api.item.IngredientAny;
import crafttweaker.api.item.IIngredient;
import mods.jei.JEI;
import crafttweaker.api.util.text.MCTextComponent;
import crafttweaker.api.data.DoubleData;
import crafttweaker.api.data.IData;
import crafttweaker.api.BracketHandlers;
import crafttweaker.api.data.ListData;
import crafttweaker.api.data.ICollectionData;
import crafttweaker.api.data.StringData;

// Empty research book
craftingTable.addShaped("research_book", <item:minecraft:written_book>.withTag({title: "§bResearch Notebook" as string}), [
    [<item:minecraft:air>, <item:rftoolsbase:dimensionalshard>, <item:minecraft:air>],
    [<item:agricraft:agri_magnifying_glass>, <item:minecraft:written_book>.onlyIf("research", (book as IItemStack)=>{return !<item:minecraft:written_book>.withTag({research: true}).matches(book);}), <item:calemiutils:pencil>],
    [<item:minecraft:air>, <item:rftoolsbase:dimensionalshard>, <item:minecraft:air>]
], (usualOut as IItemStack, inputs as IItemStack[][]) => {
    var book = inputs[1][1].tag.asMap();
    
    book["title"] = "§bResearch Notebook§r";
    book["author"] = "§f" + book["author"].getString() + "§r";
    book["research"] = true;
    
    var pages = book["pages"].asCollection();
    pages.add(0, "[\"\",{\"text\":\"RESEARCH\",\"bold\":true}]");
    book["pages"] = pages;
    book["researchProgress"] = {};
    
    return <item:minecraft:written_book>.withTag(book);
});



// Declaring research plans
function newResearchPlan(plan as IItemStack, mult as double, cap as double, rec as IIngredient[][]) as int {
  plan.addTooltip(MCTextComponent.createStringTextComponent("\u00A77Research Multiplier: \u00A7f"+mult));
  plan.addTooltip(MCTextComponent.createStringTextComponent("\u00A77Research Cap: \u00A7f"+cap));
  plan.modifyShiftTooltip((stack as IItemStack, tooltip as stdlib.List<MCTextComponent>, isAdvanced as bool) as void => {
      if(stack.hasTag && (stack.tag as MapData).getAt("researchMult") != null && (stack.tag as MapData).getAt("researchCap") != null) {
          var tag = stack.tag.asMap();  
          tooltip.remove(2);
          tooltip.remove(1);
          tooltip.insert(1, MCTextComponent.createStringTextComponent("\u00A77Research Multiplier: \u00A7f"+(tag["researchMult"] as DoubleData).getDouble()));
          tooltip.insert(2, MCTextComponent.createStringTextComponent("\u00A77Research Cap: \u00A7f"+(tag["researchCap"] as DoubleData).getDouble()));
          if((stack.tag as MapData).getAt("researchTarget") != null) {tooltip.insert(1, MCTextComponent.createStringTextComponent("\u00A77Research: \u00A7b"+tag["researchTarget"].getString()));}
      }
  }, (stack as IItemStack, tooltip as stdlib.List<MCTextComponent>, isAdvanced as bool) as void => {
      if(stack.hasTag && (stack.tag as MapData).getAt("researchMult") != null && (stack.tag as MapData).getAt("researchCap") != null) {
          var tag = stack.tag.asMap();
          tooltip.remove(2);
          tooltip.remove(1);
          if((stack.tag as MapData).getAt("researchTarget") != null) {tooltip.insert(1, MCTextComponent.createStringTextComponent("\u00A7b"+tag["researchTarget"].getString()+" \u00A78["+(tag["researchMult"] as DoubleData).getDouble()+"/"+(tag["researchCap"] as DoubleData).getDouble()+"]"));}
          else {
              tooltip.insert(1, MCTextComponent.createStringTextComponent("\u00A77Research Multiplier: \u00A7f"+(tag["researchMult"] as DoubleData).getDouble()));
              tooltip.insert(2, MCTextComponent.createStringTextComponent("\u00A77Research Cap: \u00A7f"+(tag["researchCap"] as DoubleData).getDouble()));
          }
      }
  });
  <tag:items:crafttweaker:research_plan>.add(plan);
  
  
  var outPlan = plan.withTag({
    researchMult: mult as double, 
    researchCap: cap as double
  });
  
  craftingTable.addShaped(plan.translationKey, outPlan, rec,
  (usualOut as IItemStack, inputs as IItemStack[][]) => {
      var tags = usualOut.tag.asMap();
      tags["researchTarget"] = inputs[1][1].getDefinition().getDefaultInstance().displayName;
      return usualOut.withTag(tags);
  });
  mods.jei.JEI.hideRecipe("minecraft:crafting", "crafttweaker:"+plan.translationKey);
  //mods.jei.JEI.hideRecipe("minecolonies:baker/crafting", "crafttweaker:"+plan.translationKey);
  //mods.jei.JEI.hideRecipe("minecolonies:dyer/crafting", "crafttweaker:"+plan.translationKey);
  //mods.jei.JEI.hideRecipe("minecolonies:farmer/crafting", "crafttweaker:"+plan.translationKey);
  //mods.jei.JEI.hideRecipe("minecolonies:mechanic/crafting", "crafttweaker:"+plan.translationKey);
  //mods.jei.JEI.hideRecipe("minecolonies:planter/crafting", "crafttweaker:"+plan.translationKey);
  
  craftingTable.addShaped(plan.translationKey+"_jei", outPlan, [[rec[0][0], rec[0][1], rec[0][2]], [rec[1][0], <item:ftbquests:missing_item>.withTag({display: {Name: "{\"text\":\"§r§9Any Item\"}" as string}}), rec[1][2]], [rec[2][0], rec[2][1], rec[2][2]]],
  (usualOut as IItemStack, inputs as IItemStack[][]) => {
      var tags = usualOut.tag.asMap();
      tags["researchTarget"] = inputs[1][1].getDefinition().getDefaultInstance().displayName;
      return usualOut.withTag(tags);
  });
  
  return 0;
}

craftingTable.addShapeless("blank_research_plan", <item:kubejs:blank_research_plan>, [<item:minecraft:paper>, <item:calemiutils:pencil>, <item:rftoolsbase:dimensionalshard>]);
newResearchPlan(<item:kubejs:destructive_research_plan>, 1.0, 8.0, [
    [<item:minecraft:air>, <item:rftoolsbase:dimensionalshard>, <item:minecraft:air>],
    [<item:rftoolsbase:dimensionalshard>, IngredientAny.getInstance(), <item:rftoolsbase:dimensionalshard>],
    [<item:minecraft:air>, <item:kubejs:blank_research_plan>, <item:minecraft:air>]
]);
newResearchPlan(<item:kubejs:non_invasive_research_plan>, 0.3, 2.0, [
    [<item:rftoolsbase:dimensionalshard>, <item:minecraft:glass>, <item:rftoolsbase:dimensionalshard>],
    [<item:minecraft:glass>, IngredientAny.getInstance().reuse(), <item:minecraft:glass>],
    [<item:minecraft:air>, <item:kubejs:blank_research_plan>, <item:minecraft:air>]
]);


// Research Results
for key, value in quasi {
  <tag:items:crafttweaker:quasi_material>.add(BracketHandlers.getItem(key));
}

var isPlanValid = (plan as IItemStack) as bool => {
  if(!plan.hasTag) {return false;}
  if((plan.tag as MapData).getAt("researchTarget") == null) {return false;}
  if((plan.tag as MapData).getAt("researchMult") == null) {return false;}
  if((plan.tag as MapData).getAt("researchCap") == null) {return false;}
  return true;
};

var floor = (input as double) as double => {
  return (((0+input*10) as int) as double)/10.0;
};
craftingTable.addShaped("research_results", <item:kubejs:research_results>, [
    [<tag:items:crafttweaker:quasi_material>, <tag:items:crafttweaker:quasi_material>, <tag:items:crafttweaker:quasi_material>],
    [<tag:items:crafttweaker:quasi_material>, (<tag:items:crafttweaker:research_plan> as IIngredient).onlyIf("valid", isPlanValid), <tag:items:crafttweaker:quasi_material>],
    [<tag:items:crafttweaker:quasi_material>, <tag:items:crafttweaker:quasi_material>, <tag:items:crafttweaker:quasi_material>]
],
(usualOut as IItemStack, inputs as IItemStack[][]) => {
    var stabSum = 0.0;
    var stabMax = 0.0;
    var potSum = 0.0;
    var potMax = 0.0;
    for row in inputs {   for item in row {
        if(!(<tag:items:crafttweaker:research_plan> as IIngredient).matches(item)) {
            var q = quasi[item.registryName];
            
            if(q["Stability"] > stabMax) stabMax = q["Stability"];
            if(q["Potential"] > potMax) potMax = q["Potential"];
            stabSum = stabSum + q["Stability"];
            potSum = potSum + q["Potential"];
        }
    }}
    var tag = inputs[1][1].tag.asMap();
    //stabSum = math.floor(stabSum * (tag["researchMult"] as DoubleData).getDouble());
    stabSum = floor(stabSum * (tag["researchMult"] as DoubleData).getDouble());
    potSum = floor(potSum * (tag["researchMult"] as DoubleData).getDouble());
    stabMax = floor(stabMax * (tag["researchCap"] as DoubleData).getDouble());
    potMax = floor(potMax * (tag["researchCap"] as DoubleData).getDouble());
    
    if(stabSum > stabMax) {stabSum = stabMax;}
    if(potSum > potMax) {potSum = potMax;}

    return usualOut.withTag({
      "researchTarget": (inputs[1][1].tag as MapData).getAt("researchTarget"),
      "researchMechanical": stabSum,
      "researchMechanicalCap": stabMax,
      "researchMagical": potSum,
      "researchMagicalCap": potMax
    });
});


var isResultValid = (plan as IItemStack) as bool => {
  if(!plan.hasTag) {return false;}
  var tag = plan.tag as MapData;
  if(tag.getAt("researchTarget") == null) {return false;}
  if(tag.getAt("researchMechanical") == null) {return false;}
  if(tag.getAt("researchMechanicalCap") == null) {return false;}
  if(tag.getAt("researchMagical") == null) {return false;}
  if(tag.getAt("researchMagicalCap") == null) {return false;}
  return true;
};
<item:kubejs:research_results>.modifyShiftTooltip((stack as IItemStack, tooltip as stdlib.List<MCTextComponent>, isAdvanced as bool) as void => {
    if(!isResultValid(stack)) {tooltip.insert(1, "\u00A7cInvalid"); return;}
    var tag = stack.tag.asMap();
    tooltip.insert(1, MCTextComponent.createStringTextComponent("\u00A77Research: \u00A7b"+tag["researchTarget"].getString()));
    tooltip.insert(2, MCTextComponent.createStringTextComponent("\u00A77Mechanical Research: \u00A75"+(tag["researchMechanical"] as DoubleData).getDouble()+"/"+(tag["researchMechanicalCap"] as DoubleData).getDouble()));
    tooltip.insert(3, MCTextComponent.createStringTextComponent("\u00A77Magical Research: \u00A7d"+(tag["researchMagical"] as DoubleData).getDouble()+"/"+(tag["researchMagicalCap"] as DoubleData).getDouble()));
}, (stack as IItemStack, tooltip as stdlib.List<MCTextComponent>, isAdvanced as bool) as void => {
    if(!isResultValid(stack)) {tooltip.insert(1, "\u00A7cInvalid"); return;}
    var tag = stack.tag.asMap();
    tooltip.insert(1, MCTextComponent.createStringTextComponent("\u00A7b"+tag["researchTarget"].getString()+" \u00A78[\u00A75"+(tag["researchMechanical"] as DoubleData).getDouble()+"/"+(tag["researchMechanicalCap"] as DoubleData).getDouble()+"\u00A78, \u00A7d"+(tag["researchMagical"] as DoubleData).getDouble()+"/"+(tag["researchMagicalCap"] as DoubleData).getDouble()+"\u00A78]"));
});


// Combining results
var isResearchNotebookValid = (plan as IItemStack) as bool => {
  if(!plan.hasTag) {return false;}
  if((plan.tag as MapData).getAt("research") == null) {return false;}
  if((plan.tag as MapData).getAt("researchProgress") == null) {return false;}
  if((plan.tag as MapData).getAt("pages") == null) {return false;}
  return true;
};
public function getResearchLevel(vv as double) as string {
  if(vv < 3.0) {return "None";}
  if(vv < 7.5) {return "Rudementary";}
  if(vv < 15.0) {return "Basic";}
  if(vv < 30.0) {return "Standard";}
  if(vv < 45.0) {return "Extensive";}
  if(vv < 75.0) {return "Hyper-Precise";}
  if(vv < 220.0) {return "Relativistic";}
  if(vv < 400.0) {return "Quantum Level";}
  if(vv < 650.0) {return "Sub-Quantum Level";}
  if(vv < 1000.0) {return "Singularity Level";}
  return "§kWhatTheFuck";
}
craftingTable.addShaped("add_research_results", <item:minecraft:written_book>.withTag({title: "§bResearch Notebook" as string}),
    [[<item:minecraft:written_book>.onlyIf("research", isResearchNotebookValid), <item:kubejs:research_results>.onlyIf("valid", isResultValid)]],
(usualOut as IItemStack, inputs as IItemStack[][]) => {
    var book = <item:minecraft:air>;
    var result = <item:minecraft:air>;
    for row in inputs {   for item in row {
        if(<item:kubejs:research_results>.matches(item)) {result = item;}
        if(<item:minecraft:written_book>.matches(item)) {book = item;}
    }}
    
    var research = result.tag.asMap();
    var thisTarget = (research["researchTarget"] as StringData).getString();
    var thisMechanical = (research["researchMechanical"] as DoubleData).getDouble();
    var thisMagical = (research["researchMagical"] as DoubleData).getDouble();
    
    var bookTag = book.tag.asMap();
    var progress = bookTag["researchProgress"].asMap();
    if((bookTag["researchProgress"] as MapData).getAt(thisTarget) != null) {
      var thisMechanicalCap = (research["researchMechanicalCap"] as DoubleData).getDouble();
      var thisMagicalCap = (research["researchMagicalCap"] as DoubleData).getDouble();
      
      var thisProgress = progress[thisTarget].asMap();
      var allMechanical = (thisProgress["mechanical"] as DoubleData).getDouble();
      var allMagical = (thisProgress["magical"] as DoubleData).getDouble();
      
      if(allMechanical < thisMechanicalCap) {
        thisMechanical += allMechanical;
        if(thisMechanical > thisMechanicalCap) {thisMechanical = thisMechanicalCap;}
      } else {
        thisMechanical = allMechanical;
      }
      
      if(allMagical < thisMagicalCap) {
        thisMagical += allMagical;
        if(thisMagical > thisMagicalCap) {thisMagical = thisMagicalCap;}
      } else {
        thisMagical = allMagical;
      }
    }
    progress[thisTarget] = {mechanical: thisMechanical, magical: thisMagical};
    bookTag["researchProgress"] = progress;
    
    
    
    var pages = new ListData();
    var newPage = "[\"\",{\"text\":\"RESEARCH\",\"bold\":true}";
    var newPageClear = "RESEARCH ";
    for key, value in progress {
      var v = value.asMap();
      var mechanical = (v["mechanical"] as DoubleData).getDouble();
      var magical = (v["magical"] as DoubleData).getDouble();
      
      var mechanicalText = getResearchLevel(mechanical);
      var magicalText = getResearchLevel(magical);
      
      if((newPageClear+key+" - "+mechanical+"/"+magical).length > 240) {
        pages.add(newPage+"]");
        newPage = "[\"\",{\"text\":\"RESEARCH\",\"bold\":true}";
        newPageClear = "RESEARCH ";
      }
      newPage = newPage+",\"\\n\",{\"text\":\""+key+" - \",\"color\":\"dark_gray\"},{\"text\":\""+mechanical+"\",\"bold\":true,\"color\":\"dark_purple\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":[{\"text\":\"Mechanical Research: "+mechanicalText+"\",\"color\":\"dark_purple\"}]}},{\"text\":\"/\",\"color\":\"dark_gray\"},{\"text\":\""+magical+"\",\"bold\":true,\"color\":\"light_purple\",\"hoverEvent\":{\"action\":\"show_text\",\"contents\":[{\"text\":\"Magical Research: "+magicalText+"\",\"color\":\"light_purple\"}]}}";
      newPageClear = newPageClear+key+" - "+mechanical+"/"+magical + " ";
    }
    pages.add(newPage+"]");
    
    var oldPages = (bookTag["pages"] as ICollectionData).asList();
    for value in oldPages {
      var v = (value as StringData).getString() as string;
      if((v.indexOf("[\"\",{\"text\":\"RESEARCH\",\"bold\":true}") as int) != 0) {
          pages.add(value as StringData);
      }
    }
    bookTag["pages"] = pages;
    
    return book.withTag(bookTag);
});
craftingTable.addShapeless("research_copying_jei", <item:minecraft:written_book>.withTag({generation: 1 as int, title: "§bResearch Notebook" as string}),
    [<item:minecraft:written_book>.withTag({title: "§bResearch Notebook" as string}), <item:minecraft:writable_book>]
);
craftingTable.addShapeless("quasi_journal", <item:patchouli:guide_book>.withTag({"patchouli:book": "patchouli:quasi_journal" as string}),
    [<item:minecraft:book>, <item:kubejs:blank_research_plan>]
);